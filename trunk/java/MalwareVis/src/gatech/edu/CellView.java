package gatech.edu;

import gatech.edu.pcap.Pcap;
import gatech.edu.geometry.*;
import processing.core.*;

public class CellView extends PApplet {
	  Cell myCell;
	  int h; 
	  int w;
	  
	  public CellView(int w, int h, Pcap p, float alpha){ 
		  this.w=w; 
		  this.h=h; 
		  myCell = new Cell(new pt(w/2, h/2)); 
		  myCell.setRadius(w/5); 
		  myCell.setLeng(h/2-w/5 - w/5*0.258f); 
		  myCell.load(p); 
		  myCell.setMappingAngle(alpha); 
	  }
	  @Override
	public void setup() {
	    size(w+20, h+20);
	    ellipseMode(CENTER);
	    textAlign(CENTER); 
	    imageMode(CENTER); 
	    smooth();
	    noLoop(); 
	  }
	  @Override
	public void draw() {
		background(255);
	    myCell.showCilium(this);
	    myCell.showBody(this);
	  }
	  @Override
	public void mousePressed(){
		myCell.selectCilium(this); 
		redraw(); 
	  }
	  public void setAlpha(float alpha){
		  myCell.setMappingAngle(alpha); 
		  redraw(); 
	  }
	  @Override
	public void keyPressed(){
		  if (key=='c') {
			  System.out.println("save a frame"); 
			  this.saveFrame("pics/pic-####.png"); 
		  }
	  }

}
